!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).wheel=t()}(this,function(){"use strict";var s={containerClass:".wheel-container",container:"",paginate:!0,section:[],sectionClass:".wheel-section",paginationClass:".wheel-pagination",pagination:""};function n(e,t){return this instanceof n?this.init(e,t):new n(e,t)}return n.prototype.init=function(e,t){"string"!=typeof e&&(e=void 0),e?s.container=document.querySelector(e):!s.container&&s.containerClass&&(s.container=document.querySelector(s.containerClass)),s.section=s.container.querySelectorAll(s.sectionClass),this.paginationList="",this.keepHash="",this.lockW="",this.lock=!1,this.posDelta=null,this.bindEvent().initSection().renderPagination().render()},n.prototype.bindEvent=function(){var n=this;window.onhashchange=function(){return n.render()};var i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";return document.addEventListener(i,function(e){var t="wheel"==i?e.deltaY:e.originalEvent.wheelDelta||-e.originalEvent.detail;n._wheelHolder(e,t)}),this},n.prototype._wheelHolder=function(e,t){var n=this;if(!this.lock){if(0==t||Math.abs(t)<100)return;0<t&&-1<!s.container.className.indexOf("noSlideDown")?(this.slide(1),this.posDelta=1):t<0&&-1<!s.container.className.indexOf("noSlideUp")&&(this.slide(-1),this.posDelta=0),this.lock=!0,setTimeout(function(){n.lock=!1},800)}},n.prototype.render=function(){var e=this,t=Math.floor(Number(location.hash.split(/#/)[1])),n=s.section.length;t?t<1?t=1:n<t&&(t=n):(t=1,location.hash="#1");var i=t;if(t===this.keepHash)return!1;this.keepHash&&t>this.keepHash?this.posDelta=1:this.keepHash&&t<this.keepHash&&(this.posDelta=0),this.keepHash=t;try{clearTimeout(this.lockW)}catch(e){}this.lock=!0,this.lockW=setTimeout(function(){e.lock=!1},800),s.section.forEach(function(e){e.classList.remove("prep"),e.classList.remove("active"),e.classList.remove("next");var t=e.getAttribute("data-index");t==i-1?e.classList.add("prep"):t==i?e.classList.add("active"):t==i+1&&e.classList.add("next")});var a=s.pagination.querySelector("li a.active");return a&&a.classList.remove("active"),s.pagination.querySelector('li a[data-index="'+i+'"]').classList.add("active"),this.animateSection(),this},n.prototype.slide=function(e){var t;return s.section.forEach(function(e){-1<e.className.indexOf("active")&&(t=parseInt(e.getAttribute("data-index")))}),(t<=s.section.length&&1<t&&-1===e||t<s.section.length&&1===e)&&(location.hash="#"+(t+e)),this},n.prototype.animateSection=function(){var o=this;return s.section.forEach(function(t){var n,i,a;1===o.posDelta&&-1<t.className.indexOf("prep")?(t.classList.add("leave"),n=function(e){t.classList.remove("leave"),t.removeEventListener("animationend",n)},t.addEventListener("animationend",n)):null!==o.posDelta&&-1<t.className.indexOf("active")?(t.classList.add(o.posDelta?"enter":"back"),i=function(e){t.classList.remove(o.posDelta?"enter":"back"),t.removeEventListener("animationend",i)},t.addEventListener("animationend",i)):0===o.posDelta&&-1<t.className.indexOf("next")&&(t.classList.add("go"),a=function(e){t.classList.remove("go"),t.removeEventListener("animationend",a)},t.addEventListener("animationend",a))}),this},n.prototype.initSection=function(){var n=this;return s.section.forEach(function(e,t){e.setAttribute("data-index",t+1),n.paginationList+='<li><a data-index="'+(t+1)+'" href="#'+(t+1)+'"></a></li>'}),this},n.prototype.renderPagination=function(){var e=document.createElement("ul");return e.innerHTML=this.paginationList,e.classList.add(s.paginationClass.replace(".","")),s.container.insertBefore(e,null),(s.pagination=e).querySelectorAll("li a").forEach(function(e){e.onclick=function(){s.container.classList.remove("noSlideUp"),s.container.classList.remove("noSlideDown")}}),this},n});
