!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).wheel=t()}(this,function(){"use strict";var o={containerClass:".wheel-container",container:"",paginate:!0,section:[],sectionClass:".wheel-section",rootSectionClass:".wheel-rootSection",paginationClass:".wheel-pagination",pagination:""};function i(e,t){return this instanceof i?this.init(e,t):new i(e,t)}return i.prototype.init=function(e){"string"!=typeof e&&(e=void 0),e?o.container=document.querySelector(e):!o.container&&o.containerClass&&(o.container=document.querySelector(o.containerClass)),o.section=o.container.querySelectorAll(o.sectionClass),this.paginationList="",this.keepHash="",this.quietW="",this.quiet=!1,this.posDelta=null,this._bindEvent()._initSection()._renderPagination()._render()},i.prototype._bindEvent=function(){var i=this;window.onhashchange=function(){return i._render()};var n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";return document.addEventListener(n,function(e){var t="wheel"==n?e.deltaY:e.originalEvent.wheelDelta||-e.originalEvent.detail;i._wheelHolder(e,t)}),this},i.prototype._wheelHolder=function(e,t){var i=this;if(console.log(t),0==this.quiet){if(0==t||Math.abs(t)<100)return;0<t&&-1<!o.container.className.indexOf("noSlideDown")?(this.slideDown(),this.posDelta=1):t<0&&-1<!o.container.className.indexOf("noSlideUp")&&(this.slideUp(),this.posDelta=0),this.quiet=!0,setTimeout(function(){i.quiet=!1},1e3)}},i.prototype._render=function(){var e=this,t=Math.floor(Number(location.hash.split(/#/)[1])),i=o.section.length;t?t<1?t=1:i<t&&(t=i):(t=1,location.hash="#1");var n=t;if(t===this.keepHash)return!1;t>this.keepHash?this.posDelta=1:t<this.keepHash&&(this.posDelta=0),this.keepHash=t;try{clearTimeout(this.quietW)}catch(e){}this.quiet=!0,this.quietW=setTimeout(function(){e.quiet=!1},1e3),o.section.forEach(function(e){e.classList.remove("prep"),e.classList.remove("active"),e.classList.remove("next");var t=e.getAttribute("data-index");t==n-1?e.classList.add("prep"):t==n?e.classList.add("active"):t==n+1&&e.classList.add("next")});var a=o.pagination.querySelector("li a.active");return a&&a.classList.remove("active"),o.pagination.querySelector('li a[data-index="'+n+'"]').classList.add("active"),this.animateSection(),this},i.prototype.slideDown=function(){var t;return o.section.forEach(function(e){-1<e.className.indexOf("active")&&(t=parseInt(e.getAttribute("data-index")))}),t<o.section.length&&(location.hash="#"+(t+1)),this},i.prototype.slideUp=function(){var t;return o.section.forEach(function(e){-1<e.className.indexOf("active")&&(t=parseInt(e.getAttribute("data-index")))}),t<=o.section.length&&1<t&&(location.hash="#"+(t-1)),this},i.prototype.swipeEvents=function(){return this.each(function(){var a,o,s=$(this);function r(e){var t,i,n=e.originalEvent.touches;n&&n.length&&(t=a-n[0].pageX,i=o-n[0].pageY,50<=t&&s.trigger("swipeLeft"),t<=-50&&s.trigger("swipeRight"),50<=i&&s.trigger("swipeUp"),i<=-50&&s.trigger("swipeDown"),(50<=Math.abs(t)||50<=Math.abs(i))&&s.unbind("touchmove",r)),e.preventDefault()}s.bind("touchstart",function(e){var t=e.originalEvent.touches;t&&t.length&&(a=t[0].pageX,o=t[0].pageY,s.bind("touchmove",r))})})},i.prototype.animateSection=function(){var i=this;return o.section.forEach(function(t){1===i.posDelta&&-1<t.className.indexOf("prep")?(t.classList.add("leave"),t.addEventListener("animationend",function(e){t.classList.remove("leave")})):-1<t.className.indexOf("active")?(t.classList.add(i.posDelta?"enter":"back"),t.addEventListener("animationend",function(e){t.classList.remove(i.posDelta?"enter":"back")})):0===i.posDelta&&-1<t.className.indexOf("next")&&(t.classList.add("go"),t.addEventListener("animationend",function(e){t.classList.remove("go")}))}),this},i.prototype._initSection=function(){var i=this;return o.section.forEach(function(e,t){e.setAttribute("data-index",t+1),i.paginationList+='<li><a data-index="'+(t+1)+'" href="#'+(t+1)+'"></a></li>'}),this},i.prototype._renderPagination=function(){var e=document.createElement("ul");return e.innerHTML=this.paginationList,e.classList.add(o.paginationClass.replace(".","")),o.container.insertBefore(e,null),(o.pagination=e).querySelectorAll("li a").forEach(function(e){e.onclick=function(){o.container.classList.remove("noSlideUp"),o.container.classList.remove("noSlideDown")}}),this},i});
